<div ng-controller="ImplementBehavior">
    

    <div class="section section-description " >
        <div ng-include="'/client/microtasks/microtask_title.html'"></div>
        <div class="section-content  job-description" >
            Implement a behavior for this function
        </div>
    </div>

	<div class="section section-description">
		<div class="section-title" >
			<div class="dot bg-color"></div>
			Described behaviors
		</div>
		<div class="section-content">
			<div class="tests-list" >
				<div class="test-item {{ !t.running ? (t.result.passed ? 'passed' : 'failed' ) : '' }}" ng-repeat="t in data.tests track by $index">
					<div class="toggler" ng-click="toggleTest($event,t)">
						<strong class="pull-left">
							it {{ t.description }}
						</strong> 
						<span class="pull-right">
							<span ng-if="t.running">
								running
							</span>
							<span ng-if="!t.running">
								<button ng-disabled="data.changedSinceLastRun" class="btn btn-sm {{ data.inspected == t ? 'btn-primary' : '' }}" ng-click="inspectTest($event,t);">
									<span class="glyphicon glyphicon-search"></span>
								</button>
							</span>
						</span>
						<span class="clearfix"></span>
					</div>
					<div class="result" ng-if="t.expanded">
						<div class="row">
							<div class="col-md-1">Execution time</div>
							<div class="col-md-11">{{ t.result.executionTime > -1 ? t.result.executionTime + 'ms' : 'timeout' }}</div>
						</div>
						<div class="row" ng-if="t.result.message">
							<div class="col-md-1">Message</div>
							<div class="col-md-11">{{t.result.message}}</div>
						</div>
						<div class="row" ng-if="t.result.showDiff">
							<div class="col-md-1">Diff</div>
							<div class="col-md-11">{{t.result.expected}} - {{t.result.actual}}</div>
						</div>
						<div class="row">
							<div class="col-md-1">Code</div>
							<div class="col-md-11"><test-editor test="t"></test-editor></div>
						</div>
					</div>
				</div>
			</div>

			<div>
				<div class="pull-right">
					<button class="btn btn-sm" ng-click="run()">Run Tests</button>
				</div>
				<span class="clearfix"></span>
			</div>
		</div>	
	</div>

	<div class="section">
		<div class="section-content no-padding">
			<function-editor
				ng-show="!data.editingStub"
	            function="funct" 
	            editor="data.editor" 
	            logs="(data.running || data.inspected) ? data.inspected.logs : undefined"
	            callbacks="editorCallbacks"
	            >
	        </function-editor>
	        <div ng-show="data.editingStub">
	        	<input ng-model="data.editingStub.output">
	        	<button ng-click="data.editingStub = false">close</button>
	        </div>
	    </div>
	</div>
		
</div>
