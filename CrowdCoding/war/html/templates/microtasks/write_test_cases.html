<div ng-controller="WriteTestCasesController" >

	<div class="section section-description " >
		<div class="section-content no-padding microtask-details" >
				<span class="bg-color type">{{::data.title}}</span>
				<span class="points">{{::data.submitValue}} pts</span>
				<span class="tutorial-btn glyphicon glyphicon-question-sign color" ng-click="userService.startTutorial(microtask.type,true);"></span>
				<span class="clearfix"></span>
		</div>
		<div class="section-content job-description" >
			<div ng-show="microtask.reissuedFrom !== undefined" ng-include="'/html/templates/reissue_microtask.html'"></div>

			<div ng-show="microtask.promptType=='FUNCTION_SIGNATURE'" >

				Can you describe some test cases in which this function might be used? <br />
				Are there any unexpected corner cases that might not work? <br/>
				<strong>TIP:</strong> you don't need a fully specifed test, just a description of the type of test to be performed
			</div>

			<div ng-show="microtask.promptType=='CORRECT_TEST_CASE'" >
				A test case has been reported by the crowd.
			    <br>
			    According to the report explanation, can you fix 
			    the reported test case (and others if necessary) for the function <strong>{{microtask.owningArtifact}}</strong> ?	
			</div>
		</div>
	</div>

 	<div ng-if="microtask.inDispute">
		<div class="section section-description"  >
			<div class="section-title" >
				<div class="dot bg-color"></div>
				REPORTED TESTCASE 
			</div>

			<div class="section-content">
				{{microtask.disputedTestCase}}
			</div>
		</div>

		<div class="section section-description" >
			<div class="section-title" >
				<div class="dot bg-color"></div>
				REPORT EXPLANATION 
			</div>
			<div class="section-content">
				{{microtask.disputeDescription}}
			</div>
		</div>
 	</div>
	


	<div class="section section-description" id="functionSignature">

		<div class="section-title" >
			<div class="dot bg-color"></div>
			FUNCTION SIGNATURE
		</div>

		<div class="section-link" ng-show="!funct.readOnly && canBeDisputed && !dispute" >
			<a ng-click="toggleDispute(); $event.preventDefault(); $event.stopPropagation();">Report an issue in the function signature <span class="glyphicon glyphicon-exclamation-sign"></span></a>
		</div>

		<div class="section-content no-padding">
			<ace-read-js code="::functionDescription" ></ace-read-js>
		</div>
		
	</div>


	<alertcontainer></alertcontainer>
			
	<div class="section-cols" ng-if="!dispute" >

		<div class="container-flex-row">
			<div class="section section-help bg-color-alpha" style="width:30%" id="example">
				<div class="section-title" >
					<div class="dot"></div>
					EXAMPLE
				</div>
				<div class="section-content" >
					<div class="accordion-inner">
						subtract(a, b)<BR>

						<B>Here are some test cases:</B><BR>
						a is greater than b<BR>
						b is greater than a<BR>
						a is the same as b<BR>
						a is positive, b is negative<BR>
						a is negative, b is zero<BR>
						a is positive, b is zero<BR>
					</div>
				</div>
				<div class="section-title" >
					<div class="dot"></div>
					AVAILABLE DATA TYPES
				</div>
				<div class="section-content" >
					<adt-list></adt-list>
				</div>
			</div>


			<div class="section section-form" style="width:70%;" id="form" >

				<div class="section-title no-padding" >
					<div class="input-group" ng-form="newForm">
				    	<input type="text"
				      		tabindex="1"
				      		name="newTestCase"
							ng-model="model.newTestcase"
							press-enter="addTestCase()"
							placeholder="Describe a test case"
				      		class="form-control"
				      		focus
				      	>
						<span class="input-group-btn">
							<button class="btn btn-default" ng-click="addTestCase()" type="button" tabindex="2">
								<span class="glyphicon glyphicon-plus"></span>
							</button>
						</span>
				    </div>

				</div>
				<div class="section-content no-padding" >

					<div class="list-group" >
						<div ng-form="testCase" ng-repeat="(index,test) in model.testcases | filter: { deleted:false }" class="list-item input-group input-group-sm animate-repeat">
						  	<input ng-if="!test.readOnly" type="text" class="form-control" 
							    placeholder="Describe a test case"
							  	name="testcase"
								ng-model="test.text"
								press-enter=" editMode = testCaseForm.testcase.$invalid ? true : false "
							    ng-focus="editMode=true"
							    ng-blur="editMode=false"
							    ng-readonly="test.readOnly"

							    tabindex="{{2*index+2}}"
							    required
							>
							<input ng-if="test.readOnly" type="text" class="form-control" 
							  	name="testcase"
								ng-model="test.text"
							    readonly 
							    data-placement="left"
							    data-trigger="hover" 
							    data-title="this test case cannot be edited or removed" 
							    bs-tooltip
							>
					  		<span class="input-group-btn" >
					  			<button class="btn"  tabindex="{{2*index+3}}" ng-click="removeTestCase($index)" type="button">
					  				<span class="glyphicon glyphicon-remove" ng-hide="test.readOnly" ></span>
					  			</button>
							</span>
							<span class="help-block" ng-show="testCase.testcase.$dirty && testCase.testcase.$invalid && testCase.testcase.$error.required">
								a test case name can't be empty!
							</span>
						</div>
					</div>

					<span ng-if="model.testcases.length == 0" >write at least one test case</span>
					
				</div>
			</div>

		</div>
	</div>

	<div class="section section-form" ng-show="dispute">
		<div class="section-content" >
			<div class="heading-1" >what's wrong with this function signature?</div>
			<textarea name="disputeTextInput" class="form-control required" style="resize:none" ng-model="disputeText" ng-required="dispute"></textarea>
			<span
			class="help-block" ng-show="microtaskForm.disputeTextInput.$dirty && microtaskForm.disputeTextInput.$invalid && microtaskForm.disputeTextInput.$error.required">This field is required!</span>
			<br>
			<a href="#" class=" " ng-click="toggleDispute()" > Nothing is wrong!</a>
		</div> 

	</div> 

</div>

