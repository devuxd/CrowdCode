<div ng-controller="WriteTestCasesController" >

	<div class="section section-description " >
		<div class="section-content no-padding" >
			<ul class="microtask-details clearfix">
				<li>{{::datas.title}}</li>
				<li>
					<span>{{::datas.submitValue}} points</span>
				</li>
				<li>
					<div class="help-btn" ng-click="startTutorial('WriteTestCases');"><span class="glyphicon glyphicon-question-sign"></span></div>
				</li>
			</ul>
		</div>
	</div>

	<div class="section section-description">
		<div class="section-title" >
		JOB DESCRIPTION
		</div>
		<div class="section-content" >
			<div ng-show="microtask.reissuedFrom !== undefined" ng-include="'/html/templates/reissue_microtask.html'"></div>

			<div ng-show="microtask.promptType=='FUNCTION_SIGNATURE'" >

				What are some cases in which this function might be used? Are there any unexpected corner
				cases that might not work?
			</div>

			<div ng-show="microtask.promptType=='CORRECT_TEST_CASE'" >
			    Has been reported this issue:
			    <div class="form-group has-error">
			    	<input type="text"
			    	class="form-control"
			    	disabled="true"
			    	name="disputeDescription"
			    	ng-model="microtask.disputeDescription"
			    	>
			    </div>
			    <br>
			    For the following test case:
			    <div class="form-group">
			    	<input type="text"
			    	class="form-control"
			    	disabled="true"
			    	name="disputedTestCase"
			    	ng-model="microtask.disputedTestCase"
			    	>
			    </div>
				Can you rewrite the test case (and others if necessary) to address the issue?<BR>
			</div>
		</div>
	</div>

	<div class="section section-description" id="functionSignature">
		<div class="section-title" >
			FUNCTION SIGNATURE
		</div>
		<div class="section-content no-padding">
			<ace-read-js code="::functionDescription" mode="diff" ></ace-read-js>
		</div>
		<div class="clearfix"></div>	
		<span ng-show="canBeDisputed" class="input-group-btn pull-top-right">
			<button class="btn btn-primary" ng-disabled="dispute" ng-click="toggleDispute()">Dispute function signature</button>
		</span>
	</div>


	<alertcontainer></alertcontainer>
			
	<div class="section-cols" >
		<div class="container-flex-row">
			<div class="section section-help" style="width:30%" id="example">
				<div class="section-title" >
					EXAMPLE
				</div>
				<div class="section-content" >
					<div class="accordion-inner">
						subtract(a, b)<BR>

						<B>Here are some test cases:</B><BR>
						a is greater than b<BR>
						b is greater than a<BR>
						a is the same as b<BR>
						a is positive, b is negative<BR>
						a is negative, b is zero<BR>
						a is positive, b is zero<BR>
					</div>
				</div>
				<div class="section-title" >
					AVAILABLE DATA TYPES
				</div>
				<div class="section-content" >
					<adt-list></adt-list>
				</div>
			</div>


			<div class="section section-form" style="width:70%;" id="form" ng-show="!dispute">

				<div class="section-title no-padding" >

					<div class="input-group" ng-form="newForm">
				    	<input type="text"
				      		tabindex="1"
				      		name="newTestCase"
				      		
							ng-model="newTestCase"
							press-enter="addTestCase()"
							placeholder="Describe a test case"
				      		class="form-control"
				      		focus
				      	>
						<span class="input-group-btn">
							<button class="btn btn-default" ng-click="addTestCase()" type="button" tabindex="2">Add</button>
						</span>
				    </div>

				</div>
				<div class="section-content" >

					<div class="list-group" >
						<div ng-form="testCase" ng-repeat="(index,test) in testCases | filter: { deleted:false }" class="list-item input-group input-group-sm animate-repeat">
						  	<input type="text" class="form-control" 
							    placeholder="Describe a test case"
							  	name="testcase"
								ng-model="test.text"
								press-enter=" editMode = testCaseForm.testcase.$invalid ? true : false "
							    ng-focus="editMode=true"
							    ng-blur="editMode=false"

							    tabindex="{{2*index+2}}"
							    required
							>
							<span class="help-block" ng-show="testCase.testcase.$dirty && testCase.testcase.$invalid && testCase.testcase.$error.required">
								a test case name can't be empty!
							</span>
					  		<span class="input-group-btn" >
					  			<button class="btn"  tabindex="{{2*index+3}}" ng-click="removeTestCase($index)" type="button">
					  				<span class="glyphicon glyphicon-remove"></span>
					  			</button>
							</span>
						</div>
					</div>

					<span ng-if="testCases.length == 0" >write at least one test case</span>
					
				</div>
			</div>
			<div class="section section-form" style="width:70%;" ng-show="dispute">
				<div class="section-title" >
					DISPUTE FUNCTION SIGNATURE
				</div>
				<div class="section-content" >
					<div id="disputeDiv" class="form-group">
						<label for="disputeTextInput"><b>Dispute Function Signature:</b> what's wrong with this function signtaure? </label>
						<textarea name="disputeTextInput" class="form-control required" style="resize:none" ng-model="disputeText" ng-required="dispute"></textarea>
						<span
						class="help-block" ng-show="microtaskForm.disputeTextInput.$dirty && microtaskForm.disputeTextInput.$invalid && microtaskForm.disputeTextInput.$error.required">This field is required!</span>
						<br>
						<button class="btn " ng-click="toggleDispute()" >Nothing is wrong with the function signtaure</button>
					</div>
				</div> <!-- /. WRITE TEST DIV -->
			</div> <!-- ./ SECTION CONTENT -->

		</div>
	</div>
<!--
	<div class="task-buttons pull-right">
		<button ng-click="submit()" class="btn btn-primary" ng-disabled="form.$invalid || testCases.length==0" >Submit</button>
		<button ng-click="$emit('skipMicrotask')"   class="btn btn-link"   >Skip</button>
	</div>
	<div class="clearfix"></div>
-->
</div>



<tutorial title="WriteTestCases">
	<step>
		<tag>#functionSignature</tag>
		<content>this is the signature of the function bla bla bla</content>
		<content-position>bottom</content-position>
	</step>
	<step>
		<tag>#example</tag>
		<content>if you don't know what to do, take a look to the example!</content>
		<content-position>top</content-position>
	</step>
	<step>
		<tag>#form</tag>
		<content>write here what you think the test cases are bla bla bla</content>
		<content-position>top</content-position>
	</step>
</tutorial>